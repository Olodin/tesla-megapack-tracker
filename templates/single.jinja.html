{% extends "base.html" %}

{% block title %} 
{{p.name}} ({{ p['capacity mwh'] }}MWh)
{% endblock %}

{% block og_props %}
<meta name="description" content="detail page for {{p.name}} big battery">

<meta property="og:title" content="{{p.name}} ({{ p['capacity mwh'] }}MWh)" />
<meta property="og:description" content="detail page for {{p.name}} big battery" />
<meta property="og:image" content="https://lorenz-g.github.io/tesla-megapack-tracker/pics/logo.jpg" />
{% endblock %}

{% block content %}

<h3> {{p.name}} {{p.smileys}} </h3>

<dt>Status </dt>
<dl><span class="{{ p.status_class }}">{{ p["status"] }}</span> </dl>

<dt>Country / State / Closest City </dt>
<dl>{{ p["country"] }} / {{ p["state"] }} / {{ p["city"] }}</dl>

<dt>Date first heard / Construction start / Operation start / Estimated Operation Start</dt>
<dl>{{ p["date first heard"] }} / {{ p["start construction"] }} / {{ p["start operation"] }} / {{ p["start estimated"] }}</dl>

<dt>Capacity in MWh </dt>
<dl>{{ p["capacity mwh"] }}</dl>

<dt>Maximum Power in MW </dt>
<dl>{{ p["power mw"] }}</dl>

<dt>Manufacturer </dt>
<dl>{{ p["manufacturer"] }} </dl>

<dt>Type / Number of Packs / Cells </dt>
<dl>{{ p["type"] }} / {{ p["no of battery units"] }} / {{ p["cells"] }}</dl>

<dt>Customer / Owner / Developer</dt>
<dl>{{ p["customer"] }} / {{ p["owner"] }} / {{ p["developer"] }} </dl>


<dt>Use case </dt>
<dl>{{ p["use case"] }}</dl>

<dt>Link to google maps satellite view</dt>
<dl><a href="{{ p['google_maps_link'] }}" target="_blank">{{ p["google_maps_link"] }}</a> </dl>

<dt>Coordinates </dt>
<dl>
    {{ p["lat"] }}, {{ p["long"] }} 
    {% if p["coords exact"] != "1" %}
    <br> üìç Did not manage to find exact coordinates for this project, they are just an estimate.
    {% endif %}
</dl>


<dt>Notes </dt>
<dl>
    {% for note in p.notes_split %}
    {{ note }} <br>
    {% endfor %} 
</dl>

<dt>Project website </dt>
<dl><a href="{{ p['project website'] }}" target="_blank">{{ p["project website"] }} </a> </dl>

<dt> Sources </dt>
<dl>
    <a href="{{ p.link1 }}" target="_blank">{{ p.link1 }} </a> <br>
    <a href="{{ p.link2 }}" target="_blank">{{ p.link2 }} </a> <br>
    <a href="{{ p.link3 }}" target="_blank">{{ p.link3 }} </a>
</dl>

{% if p.eia_plant_id in extra.eia.projects %}
<h3> US EIA data </h3>
This data is matched from the U.S. Energy Information Administration (EIA) electricity monthly website from planned (Chapter 6.5) and existing (Chapter 6.3) energy projects
 <a href ="https://www.eia.gov/electricity/monthly/">https://www.eia.gov/electricity/monthly/</a></li>
<br>

{% if extra.eia.projects[p.eia_plant_id].values() | length > 1 %}
<span class="badge bg-info">This project has multiple generator ids under the same plant id</span><br>
{% endif %}



{% for gen in extra.eia.projects[p.eia_plant_id].values()%}
From the <code>{{ gen.current_month }}</code> report<br>

<br>
<dt>Plant Name / State</dt>
<dl>{{ gen["current"]["plant name"]}} / {{ gen["current"]["plant state"]}}</dl>

<dt>go live / power </dt>
<dl>{{ gen["current"]["date"]}} / {{ gen["current"]["mw"]}}MW</dl>

<dt>status / simple status</dt>
<dl>{{ gen["current"]["status"]}} / {{ gen["current"]["status_simple"]}} </dl>

<dt>Plant id / generator id </dt>
<dl>{{ gen["current"]["plant id"]}} / {{ gen["current"]["generator id"]}}</dl>

<dt>Entity name / entity id </dt>
<dl>{{ gen["current"]["entity name"]}} / {{ gen["current"]["entity id"]}}</dl>

<b>Changes:</b><br>

{% for change in gen.changes %}
    <b>{{change.month}}</b><br>
    {% for field in change.li %}
        {{ field.name }}: {{ field.from }} -> {{ field.to }} <br>
    {% endfor %} <!-- field -->

{% endfor %} <!-- changes -->
<br><br>
{% endfor %}
{% endif %}

{% endblock %}
